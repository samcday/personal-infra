repositories:
- name: zalando
  url: https://opensource.zalando.com/postgres-operator/charts/postgres-operator

- name: pgo-config
  chart: ./charts/pgo-config
  values:
  - endpoint: https://s3.eu-central-003.backblazeb2.com
  secrets:
  - secrets/pgo-config.yaml

- name: postgres-operator
  chart: zalando/postgres-operator
  version: 1.6.3
  values:
  - configKubernetes:
      enable_pod_disruption_budget: "false"
      pod_environment_configmap: default/postgres-pod-config
      pod_environment_secret: postgres-pod-secrets
  - configAwsOrGcp:
      aws_region: eu-central-003
      wal_s3_bucket: samcday-pgo

- name: synapse
  chart: ./charts/synapse
  secrets:
  - secrets/synapse.yaml

- name: wekan
  chart: ./charts/wekan
  values:
  - image:
      tag: v5.41
    ingress:
      enabled: false
      annotations:
        kubernetes.io/ingress.class: nginx
        cert-manager.io/cluster-issuer: letsencrypt-prod
      hosts:
        - host: wekan.samcday.com
      tls:
      - hosts:
        - wekan.samcday.com
        secretName: wekan-tls
    wekan:
      secrets:
        MONGO_URL: default/wekan-mongodb-admin-wekan
